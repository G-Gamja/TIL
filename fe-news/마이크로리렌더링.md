- https://github.com/naver/fe-news/blob/master/issues/2025-07.md#reactivity-is-easy
- https://romgrk.com/posts/reactivity-is-easy

Grid, Cell같은데서 Grid쪽에 useState를 쓰면 모든 Cell이 리렌더링되는데 이걸 최적화 하는거에 대한 이야기
결론은 스토어를 써서 개별 Cell에서 필요한 데이터만 구독해서 필요할때만 리렌더링 한다.
나는 zustand를 쓰기에 그걸 써서 구현해보자

```js
import { create } from 'zustand';

// Store 생성
const useStore = create((set) => ({
  focus: 0,
  setFocus: (index) => set({ focus: index }),
}));

function Grid() {
  return (
    <div>
      {Array.from({ length: 50 }).map((_, i) => (
        <Cell key={i} index={i} />
      ))}
    </div>
  );
}

function Cell({ index }) {
  // 여기가 핵심! selector 사용
  const isFocused = useStore((state) => state.focus === index);
  const setFocus = useStore((state) => state.setFocus);

  return (
    <button onClick={() => setFocus(index)} className={isFocused ? 'focused' : ''}>
      {index}
    </button>
  );
}
```

근데 이거 이렇게 쓰면 잘못된거야

```js
function Cell({ index }) {
  // 전체 store를 구독 → focus가 바뀔 때마다 모든 셀이 리렌더링
  const { focus, setFocus } = useStore();
  const isFocused = focus === index;

  return <button onClick={() => setFocus(index)}>{index}</button>;
}
```

왜 문제냐.

const { focus, setFocus } = useStore();
이 코드가 전체 store를 구독하는거랑 똑같은거기 때문

```js
// useStore() 호출 시 (selector 없음)
const { focus, setFocus } = useStore();

// 내부적으로는 이렇게 동작:
const storeData = useStore((state) => state); // 전체 state 구독!
const { focus, setFocus } = storeData;
```

나는 저렇게 쓰고있었는데. 큰일났네.
아래코드처럼 다 쪼개서 썼어야했음.

```js
const currentUser = useStore((state) => state.currentUser);
const users = useStore((state) => state.users);
```
